# 浮点数精度问题

- 非是 ECMAScript 独有
- IEEE754 标准中 64 位的储存格式，比如 11 位存偏移值
- 其中涉及的三次精度丢失


1. JS 中 number 类型，按照 `IEEE754` 标准区分整数和浮点数（ IEEE754 全称：IEEE 二进制浮点数算术标准）
2. JS 采用 IEEE754 标准的 双精确度 存储格式（单精确度（32位）、双精确度（64位））
3. 运算过程
    1. 浮点数转二进制（0.1转二进制是一个无限循环的数）
    2. 浮点数的储存阶段（使用科学计数法：-1 * 10^3 * 1.02） (0.1和0.2存储2次) **二次存储 精度丢失**
    3. 浮点数的运算 **精度丢失**
4. 因为两次存储时的精度丢失加上一次运算时的精度丢失，最终导致了 0.1 + 0.2 !== 0.3


**解决方法**

- Math.js：三方库 [https://mathjs.org/](https://mathjs.org/)
- 把计算数字 提升 10 的 N 次方 倍 再 除以 10的 N 次方。 N > 1
```javascript
(0.1 * 1000 + 0.2 * 1000) / 1000 == 0.3

// true
```
